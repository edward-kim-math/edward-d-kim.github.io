---
layout: default
title: Sage demo
---
<h1>{{ page.title }}</h1>

<script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
<script>sagecell.makeSagecell({"inputLocation": ".sage"});</script>

<!-- 

Vector fields: http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot_field.html

Jacobian

SVD: yes http://www.cfm.brown.edu/people/dobrush/am34//sage/svd.html

Markov: yes http://www.cfm.brown.edu/people/dobrush/am34//sage/markov.html

Leontief: yes http://www.gregorybard.com/

DEs: yes http://doc.sagemath.org/html/en/reference/calculus/sage/calculus/desolvers.html

combinatorial search?

3D plots: https://doc.sagemath.org/html/en/reference/plot3d/sage/plot/plot3d/implicit_plot3d.html

INTERACT: direct input mixed with sliders

-->

Here are some demonstrations of things that SageMath can do. Any of the scripts can be run "live" on the web by clicking "Evaluate."
Moreover, you can modify a script and click "Evaluate" again, and your code will run!

<h2>Decimal approximation</h2>
Sage can provide a decimal approximation of a number such as \(\sqrt{5}\). Note that .n() is an an alias for <a href="http://doc.sagemath.org/html/en/reference/misc/sage/misc/functional.html">numerical_approx()</a>.
<div class="sage">
<script type="text/x-sage">
print sqrt(5)
print sqrt(5).n()
</script>
</div>

<h2>Expressions and special constants</h2>
Sage will simplify expressions involving special constants such as \(\cos(\frac{\pi}{6})\) and \(\arccos(-\frac12)\).
In addition, the value of an expression such as \(e^{\pi i}\) can be stored in a variable to be used later (or printed to screen).
<div class="sage">
<script type="text/x-sage">
print cos(pi/6)
print arccos(-1/2)

eulersspecialnumber = e^(pi*i)
print eulersspecialnumber
</script>
</div>

<h2>Expanding and factoring expressions</h2>
Sage can expand the expression \((x-1)^8\) or factor the expression \(x^3+4x^2+8x+32\).
<div class="sage">
<script type="text/x-sage">
powerofbinomial = (x-1)^8
print powerofbinomial.expand()

polynomial = x^3 + 4*x^2 + 8*x + 32
print polynomial.factor()
</script>
</div>

<h2>Solving equations</h2>
Sage can solve for \(x\) in the equation \(x^2 + 3x = -2\).
<div class="sage">
<script type="text/x-sage">
print solve(x^2 + 3*x == -2, x) # Notice the double equal sign
</script>
</div>

<h2>Function evaluation</h2>
Sage can take the function \(f(x) = x^3\) and use this to evaluate \(f(2)\) and evaluate the difference quotient \( \dfrac{f(2+h)-f(2)}{h} \).
<div class="sage">
<script type="text/x-sage">
f = x^3
print f.subs(x=2)

var('h') # define a variable called h
diffquo = (f.subs(x=2+h) - f.subs(x=2))/h
print diffquo.expand()
</script>
</div>

<h2>Two-dimensional graphing: plot function</h2>
Sage can <a href="http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html#sage.plot.plot.plot">plot</a> the graph the function \(f(x) = (x-3)^2 + 4\) for \(-30 \leq x \leq 30\) and \(-30 \leq y \leq 30\).
<div class="sage">
<script type="text/x-sage">
f = (x-3)^2 + 4
plot(f, xmin=-30, xmax=30, ymin=-30, ymax=30)
</script>
</div>



<h2>Sliders: Exploring graph transformations</h2>
Sage can take a value of \(h\) and \(k\) from the user (with sliders) and plot \(y = (x-h)^2 + k\)
<div class="sage">
<script type="text/x-sage">
@interact
def _(
	h = slider(-10, 10, 0.01, default=1, label="Pick \(h\) = "),
	k = slider(-10, 10, 0.01, default=0, label="Pick \(k\) = "),
):
    f = (x-h)^2 + k
    show(plot(f, xmin=-30, xmax=30, ymin=-30, ymax=30))
</script>
</div>


<h2>Two-dimensional graphing: plot equation in two variables</h2>
Sage will provide an <a href="http://doc.sagemath.org/html/en/reference/plotting/sage/plot/contour_plot.html">implicit plot</a> of an equation in \(x\) and \(y\).
For example, here we ask Sage to sketch the plot of the equation \((x-3)^2+(y+4)^2=7\), a circle centered at \(3,-4\) of radius \(\sqrt{7}\).
<div class="sage">
<script type="text/x-sage">
var('x y') # declare variables
implicit_plot((x-3)^2 + (y+4)^2 == 7, (x,-10,10), (y,-10,10)) # Notice the double equal sign
</script>
</div>

<h2>Limits</h2>
Sage can take the function \(g(x) = \frac{\sin(x)}{x}\) and use this to find \( \displaystyle \lim_{x \to 0} g(x)\).
Sage can also take the function \(f(x) = x^3 + \frac1x\) and use this to find \( \displaystyle \lim_{h \to 0} \dfrac{f(a+h)-f(a)}{h} \) and \( \displaystyle \lim_{h \to 0} \dfrac{f(x+h)-f(x)}{h} \), the derivative via definition.
<div class="sage">
<script type="text/x-sage">
g = sin(x)/x
print g.limit(x=0)

f = x^3 + 1/x
var('a') # define 
var('h') # define a variable called h

diffquo = (f.subs(x=a+h) - f.subs(x=a))/h
#print diffquo.expand()
print diffquo.limit(h = 0)

diffquo = (f.subs(x=x+h) - f.subs(x=x))/h
#print diffquo.expand()
print diffquo.limit(h = 0)
</script>
</div>

<h2>Sliders: exploring the precise definition of a limit</h2>
Here is a script, run completely from the web, which allows a student to use sliders to explore what's really happenining the \(\varepsilon-\delta\) definition of a limit.
<div class="sage">
<script type="text/x-sage">
var('x')
f = 2^x-7
xleft = -10
xright = 10
ybottom = -10
ytop = 10
a = 2
L = 4
epsilon = 3
delta = 5

@interact
def _(
	f = input_box(f, label="\(f(x)\) = ",type=SR),
	xleft = input_box(xleft, label="\(x\) min = ",type=SR),
	xright = input_box(xright, label="\(x\) max = ",type=SR),
	ybottom = input_box(ybottom, label="\(y\) min = ",type=SR),
	ytop = input_box(ytop, label="\(y\) max = ",type=SR),
	a = input_box(a, label="Fix \(a\) = ",type=SR),
	L = input_box(L, label="Guess \(L\) = ",type=SR),
	epsilon = slider(.001, 5, .001, default=epsilon, label="Pick \(\epsilon\) = "),
	delta = slider(.001, 5, .001, default=delta, label="Adjust \(\delta\) = "),
):

	# Plot function
	fPlot = plot(f,(x,xleft,xright), ymin=ybottom, ymax=ytop, thickness=2,aspect_ratio='automatic')
	epsilon_line_1 = line([(xleft,L-epsilon),(xright,L-epsilon)], rgbcolor=(0.5,0.5,0.5),linestyle='--')
	epsilon_line_2 = line([(xleft,L+epsilon),(xright,L+epsilon)], rgbcolor=(0.5,0.5,0.5),linestyle='--')
	bad_region_1 = polygon([(a-delta,L+epsilon),(a-delta,ytop),(a+delta,ytop),(a+delta,L+epsilon)], rgbcolor=(1,0.6,0.6))
	bad_region_2 = polygon([(a-delta,L-epsilon),(a-delta,ybottom),(a+delta,ybottom),(a+delta,L-epsilon)], rgbcolor=(1,0.6,0.6))
	aL_point = point((a,L),rgbcolor=(1,0,0),pointsize=20)
	delta_line_1 = line([(a-delta,ybottom),(a-delta,ytop)],rgbcolor=(0.5,0.5,0.5),linestyle='--')
	delta_line_2 = line([(a+delta,ybottom),(a+delta,ytop)],rgbcolor=(0.5,0.5,0.5),linestyle='--')
	horizontal_line = line([(xleft,L),(xright,L)], rgbcolor=(1,0,1),linestyle='-')
	vertical_line = line([(a,ybottom),(a,ytop)],rgbcolor=(1,0,1),linestyle='-')

	pretty_print(html('The graph of $f(x)=%s$ is shown in blue with $x$ range from $%s$ to $%s$ and $y$ range from $%s$ to $%s$.'%( latex(f), xleft, xright, ybottom, ytop )))
	pretty_print(html('The purple vertical line is $x = a = %s$ and the purple horizontal line is $y = L = %s$.'%( a, L )))
	pretty_print(html('The dotted horizontal lines are $y = L \pm \epsilon$. Based on your choices, these are $y = %s \pm %s$.'%( L,epsilon )))
	pretty_print(html('The dotted vertical lines are $x = a \pm \delta$. Based on your choices, these are $x = %s \pm %s$.'%( a, delta )))
	pretty_print(html('The shaded red regions are determined by the gray lines. If your guess that $\displaystyle\\lim_{x \\rightarrow %s} f(x) = %s$ is right, then no matter how small you pick $\epsilon > 0$ (even if you choose a value for $\epsilon$ that is smaller than $%s$, as long as it\'s positive), you should be able to pick a value for $\delta > 0$ so that the blue graph does not enter the two red regions. Therefore, once you\'re successful getting the blue graph to avoid the red region, pick a value for $\epsilon$ that is bigger than $0$ but smaller than $%s$ and adjust $\delta$.' % (a, L, epsilon, epsilon)))
	show(fPlot + epsilon_line_1 + epsilon_line_2 + bad_region_1 + bad_region_2 + delta_line_1 + delta_line_2 + horizontal_line + vertical_line)
</script>
</div>


<h2>Differentiation</h2>
Sage will find the derivative of \(f(x) = x^3 + 7^x\) and \(g(x) = \sin(\sin(\sin(\sin(\sin(\sin(5x))))))\).
<div class="sage">
<script type="text/x-sage">
f = x^3 + 7^x
g = sin(sin(sin(sin(sin(sin(5*x))))))

print f.diff()
print g.diff()
</script>
</div>

<h2>Integration</h2>
Given \(f(x) = x^3 + 10x^6\), Sage can find the indefinite integral \( \displaystyle \int f(x)\,dx\) and the definite integral  \( \displaystyle \int_2^4 f(x)\,dx\).
<div class="sage">
<script type="text/x-sage">
f = x^3 + 10*x^6

print f.integral(x) # integrate with respect to x
print f.integral(x,2,4) # definite integral
</script>
</div>

<h2>Taylor polynomials</h2>
Using a for loop, we can have Sage compute several Taylor polynomials of the function \(f(x) = \sin(x) + \cos(x)\).
<div class="sage">
<script type="text/x-sage">
f = sin(x)+cos(x)
largestdegree = 5 # change this to a larger number to see more Taylor polynomials

taylorpolynomial = 0
allgraphs = plot(f, xmin=-30, xmax=30, ymin=-30, ymax=30, rgbcolor=(0,0,0)) # allgraphs will eventuall have several graphs, but start with the original function

for taylorpolynomialdegree in range(largestdegree+1):
    taylorpolynomial = taylorpolynomial + f.diff(x,taylorpolynomialdegree).subs(x=0)*x^taylorpolynomialdegree/factorial(taylorpolynomialdegree) # add the next term

    print "The Taylor polynomial of order", taylorpolynomialdegree, "is", taylorpolynomial
    allgraphs = allgraphs + plot(taylorpolynomial, xmin=-30, xmax=30, ymin=-30, ymax=30, rgbcolor=(0,1,taylorpolynomialdegree/largestdegree)) # add the graph of this Taylor polynomial to allgraphs

allgraphs.show() # now that allgraphs is properly set, show allgraphs
  </script>
</div>


<h2>Sliders: Taylor polynomials</h2>
Sliders can be used to see how similar a Taylor polynomial for \(f(x) = \sin(x) + \cos(x)\) begins to look more like the graph of \(f(x)\) itself.
<div class="sage">
<script type="text/x-sage">
@interact
def _(
	n = slider(0, 9, 1, default=0, label="Degree \(n\) = "),
):
    f = sin(x)+cos(x)

    taylorpolynomial = 0
    allgraphs = plot(f, xmin=-30, xmax=30, ymin=-30, ymax=30, rgbcolor=(0,0,0)) # allgraphs will eventuall have several graphs, but start with the original function

    for taylorpolynomialdegree in range(n+1):
        taylorpolynomial = taylorpolynomial + f.diff(x,taylorpolynomialdegree).subs(x=0)*x^taylorpolynomialdegree/factorial(taylorpolynomialdegree) # add the next term
        
    show(plot(taylorpolynomial, xmin=-30, xmax=30, ymin=-30, ymax=30) + plot(f, xmin=-30, xmax=30, ymin=-30, ymax=30, rgbcolor=(1,0,0)))
</script>
</div>

<h2>Partial Differentiation</h2>
Sage will find \(\frac{\partial f}{\partial x}\) given \(f(x,y) = x^3y + 7^x\sin(y)\).
Sage will also find \( \frac{\partial}{\partial y}( 5x + (xy)^4 - \cos(x+y+xy+x^5y^9) + 7^y)\).
<div class="sage">
<script type="text/x-sage">
var('y') # use y as a variable
f = x^3*y + 7^x*sin(y)

print f.diff(x)
print (5*x + (x*y)^4 - cos(x+y+x*y+x^5*y^9) + 7^y).diff(y)
</script>
</div>

<h2>Multiple Integrals and Hessians for functions of several variables</h2>
Given \(f(x,y)=x^3-2x\sin(y)\), Sage can find the double integral \( \displaystyle \int_{-\pi/2}^{\pi/3}\int_2^4 f(x,y)\,dx\,dy\) and the Hessian of \(f(x,y)\).
<div class="sage">
<script type="text/x-sage">
var('y')
f = x^3 - 2*x*sin(y)

print "The double integral is", f.integral(x,2,4).integral(y,-pi/2,pi/3)
print "The Hessian is"
print f.hessian()
</script>
</div>

<h2>Graphing a two-dimensional surface in three-dimensional space</h2>
Sage can do <a href="http://doc.sagemath.org/html/en/reference/plot3d/sage/plot/plot3d/implicit_plot3d.html">three-dimensional implicit plots</a> and <a href="http://doc.sagemath.org/html/en/reference/plot3d/sage/plot/plot3d/plot3d.html">graphs of functions which require three dimensions</a>.
The sage cell below shows a plot of \( z - 2.5 = 2 \sin(x) + 1.7 \cos(\frac{y}{3})\) for \(-20 \leq x \leq 20\) and \(-20 \leq y \leq 20\) and \(-8 \leq z \leq 8\)
<div class="sage">
<script type="text/x-sage">
var('x') # use x as a variable
var('y') # use y as a variable
var('z') # use z as a variable
implicit_plot3d(z - 2.5 == 2*sin(x) +1.7*cos(y/3), [x,-20,20], [y,-20,20], [z,-8,8])
</script>
</div>


<h2>Plot a slope field</h2>
Sage can plot a <a href="http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot_field.html">slope field</a> for \(\frac{dy}{dx} = \sin(x+y) + \cos(x+y)\).
<div class="sage">
<script type="text/x-sage">
x,y = var('x y')
plot_slope_field(sin(x+y) + cos(x+y), (x,-3,3), (y,-3,3))
</script>
</div>

<h2>Plot a vector field</h2>
Sage can plot the <a href="http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot_field.html">vector field</a> \({\bf F}(x,y) = \langle y, (\sin x)(\cos x - 2) \rangle \).
<div class="sage">
<script type="text/x-sage">
x,y = var('x y')
plot_vector_field((y,sin(x)*(cos(x)-2) ), (x,-pi,pi), (y,-pi,pi))
</script>
</div>


<h2>Vector geometry</h2>
Given vectors \({\bf u}=3{\bf i} + 4{\bf j} + 5{\bf k}\) and \({\bf v} = {\bf i} -3{\bf k}\), 
Sage will compute the dot product \({\bf u} \cdot {\bf v}\),
the cross product \({\bf u} \times {\bf v}\),
and the linear combination \(10{\bf u} + 3{\bf v}\).
<div class="sage">
<script type="text/x-sage">
u = vector([3,4,5])
v = vector([1,0,-3])

print "The dot product is", u.dot_product(v)
print "The cross product is", u.cross_product(v)
print "The vector", 10*u+3*v, "is a linear combination of u and v"
</script>
</div>

<h2>Matrix algebra/operations: powers of a matrix, transpose, linear combination, identity</h2>
This example specifies a \(3 \times 3\) matrix \(A\) and asks Sage to compute \(A^5\).
This example also specifies a \(2 \times 3\) matrix \(B\), defines \(C\) to be \(B^TB\), then asks Sage to compute \(2A+3C+4000I\), where \(I\) is the \(3 \times 3\) identity matrix.
<div class="sage">
<script type="text/x-sage">
A = matrix(QQ, [[1,1,2],[2,3,3],[4,0,-5]])
B = matrix(QQ, [[5,6,7],[0,9,8]])
C = B.transpose() * B

# Set up how LaTeX code should look
latex.matrix_delimiters(left='[', right=']')
latex.matrix_column_alignment('c')

print A
print "" # leave an extra line of space in the output
print latex(A)
print "" # leave an extra line of space in the output
print "Then the fifth power of the matrix is"
print "" # leave an extra line of space in the output
print A^5
print "" # leave an extra line of space in the output
print latex(A)
print 2*A + 3*C + 4000*matrix.identity(3)
</script>
</div>



<h2>Solving a system of linear equations</h2>
Sage can solve a system of linear equations such as \(y+3x=-2\) and \(x-2y = 5\).
Of course, Sage can also solve the same system by producing the rref of the appropriate augmented matrix.
<div class="sage">
<script type="text/x-sage">
var('y') # declare y to be a variable
print solve([y + 3*x == -2, x - 2*y == 5], x,y)

A = matrix([[3,1,-2],[1,-2,5]])
print A.rref()
</script>
</div>



<h2>Linear algebra: construct matrix for Gaussian elimination practice</h2>
This example constructs a \(3 \times 4\) matrix of rank \(2\) whose reduced row-echelon form has only integer values, followed by a LaTeX version.
<div class="sage">
<script type="text/x-sage">
A = random_matrix(QQ, 3, 4, algorithm='echelonizable',rank=2);

print A
print "" # leave an extra line of space in the output

# Set up how LaTeX code should look
latex.matrix_delimiters(left='[', right=']')
latex.matrix_column_alignment('c')

print latex(A)
</script>
</div>

<h2>Linear algebra: Gaussian elimination</h2>
This example constructs a \(5 \times 9\) matrix of rank \(3\) whose reduced row-echelon form has only integer values, followed by a LaTeX version.
<div class="sage">
<script type="text/x-sage">
A = random_matrix(QQ, 5, 9, algorithm='echelonizable',rank=3);

print A
print "" # leave an extra line of space in the output

# Set up how LaTeX code should look
latex.matrix_delimiters(left='[', right=']')
latex.matrix_column_alignment('c')

print latex(A)

print A.rref()

print latex(A.rref())
</script>
</div>


<h2>Linear algebra: Compute kernel, null space</h2>
This example constructs a \(7 \times 9\) matrix of rank \(5\) and finds a basis for its kernel.
We need to use right_kernel for what is generally consider the null space (or kernel) of a matrix.
<div class="sage">
<script type="text/x-sage">
A = random_matrix(QQ, 7, 9, algorithm='echelonizable',rank=5);

print A
print "" # leave an extra line of space in the output

# Set up how LaTeX code should look
latex.matrix_delimiters(left='[', right=']')
latex.matrix_column_alignment('c')

print latex(A)

print "The null space (or kernel) of the matrix:"
print A.right_kernel()
</script>
</div>


<h2>Linear algera: construct random diagonalizable matrix</h2>
This example constructs a \(4 \times 4\) diagonalizable matrix with eigenvalues \(5\), and \(3\) with multiplicity \(1\), and eigenvalue \(-6\) with multiplicity \(2\), displaying the matrix in sage's standard output, followed by a LaTeX version.
<div class="sage">
<script type="text/x-sage">
# Construct a random 4 by 4 diagonalizable matrix
A = random_matrix(QQ, 4, algorithm='diagonalizable', eigenvalues=[5,3,-6],dimensions=[1,1,2]);

print A
print "" # leave an extra line of space in the output

# Set up how LaTeX code should look
latex.matrix_delimiters(left='[', right=']')
latex.matrix_column_alignment('c')

print latex(A)</script>
</div>


<h2>Linear algera: computations on a diagonalizable matrix</h2>
This example constructs a \(4 \times 4\) diagonalizable matrix \(A\) with eigenvalues \(2\), and \(3\) with multiplicity \(1\), and eigenvalue \(-6\) with multiplicity \(2\).
Then, the characteristic polynomial is computed and displayed both in native Sage form, and in LaTeX output.
Then, we display the factored version of the characteristic polynomial.
<div class="sage">
<script type="text/x-sage">
# Construct a random 4 by 4 diagonalizable matrix
A = random_matrix(QQ, 4, algorithm='diagonalizable', eigenvalues=[2,3,-6],dimensions=[1,1,2]);
var('lam', latex_name="\\lambda") # use lam as a variable (since lambda is a reserved word)

print A
print "" # leave an extra line of space in the output

# Set up how LaTeX code should look
latex.matrix_delimiters(left='[', right=']')
latex.matrix_column_alignment('c')

print A-lam*matrix.identity(4)
print latex(A-lam*matrix.identity(4))

charpol = det(A-lam*matrix.identity(4))

print charpol # print the characteristic polynomial using Sage's variable
print latex(charpol) # print a nice version for use in LaTeX

print charpol.factor()
print latex(charpol.factor())

print A.eigenvalues()
print A.eigenvectors_right()
</script>
</div>


<h2>Visualizing a graph</h2>
Sage can provide a visual representation of the complete graph \(K_5\) on \(5\) vertices. The same visual representation can be exported as TikZ code.
<div class="sage">
<script type="text/x-sage">
K5 = graphs.CompleteGraph(5)
K5.show()
print latex(K5)
</script>
</div>


<h2>Graph properties</h2>
Sage can construct a random graph \(G\) on \(n=9\) vertices, with each edge inserted independently with probability \(p=.3\).
Sage can present <a href="http://doc.sagemath.org/html/en/reference/graphs/sage/graphs/graph.html">many computations</a> related to the graph \(G\),
such as its adjacency matrix, Tutte polynomial, matching polynomial, chromatic polynomial, chromatic number (even finding a proper coloring for you), and a maximum independent set.
Since the graph \(G\) was constructed randomly, running this script again will produce different results each time.
<div class="sage">
<script type="text/x-sage">
G = graphs.RandomGNP(9,.3)
G.show()
print "Here is the adjacency matrix for the graph:"
print G.adjacency_matrix()
print "The Tutte polynomial of the graph is", G.tutte_polynomial()
print "The matching polynomial of the graph is", G.matching_polynomial()
print "The chromatic polynomial of the graph is", G.chromatic_polynomial()
print "A proper vertex coloring of the graph is", G.coloring(), "and the minimum number of colors needed is", G.chromatic_number()
print "A maximum independent set of the graph is", G.independent_set()
</script>
</div>








